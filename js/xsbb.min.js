function urlToLink(t){var e=/(http|ftp|https):\/\/[\w-]+(.[\w-]+)+([\w-.,@?^=%&:/~+#]*[\w-\@?^=%&/~+#])?/g;return t=t.replace(e,function(t){return"<a href='"+t+"' target='_blank'> <i class='iconfont icon-lianjie-copy'></i>链接 </a>"}),t}function getData(t=0){query.descending("createdAt").skip(20*t).limit(20).find().then(function(t){if(0==t.length)alert("之前没哔哔过了");else{let e=t;reqData=!1,e.forEach(t=>{let e=new Date(t.createdAt);t.attributes.time=`${e.getFullYear()}-${e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1}-${e.getDate()+1<10?"0"+e.getDate():e.getDate()} ${e.getHours()+1<=10?"0"+e.getHours():e.getHours()}:${e.getMinutes()+1<=10?"0"+e.getMinutes():e.getMinutes()}`,t.attributes.content="<content>"+urlToLink(t.attributes.content)+"</content>",app.contents.push(t)})}},function(t){})}var{Query:Query}=AV;AV.init({appId:"91UroQk3R6xRP5p6CD7bfDJm-MdYXbMMI",appKey:"qxxUH8hJtxNcKYQbOfS6K9Ox",serverURLs:"https://leancloudapi.xsbb.tk"});var query=new AV.Query("content"),app=new Vue({el:"#app",data:{page:0,count:0,contents:[]},methods:{loadMore:function(t){getData(++this.page)}}});getData(0),query.count().then(function(t){app.count=t},function(t){});